{% extends 'base.html' %}

{% block content %}
<div class="bg-white shadow-md rounded-lg p-6">
  <h2 class="text-2xl font-bold mb-6 text-gray-800">
    Create YouTube Shorts from Long Video
  </h2>

  <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
    <div class="flex items-start space-x-3">
      <div class="flex-shrink-0">
        <i class="fas fa-info-circle text-blue-500 mt-1"></i>
      </div>
      <div>
        <h3 class="text-blue-800 font-medium mb-1">How it works</h3>
        <p class="text-blue-700 text-sm">
          Our AI will analyze a long YouTube video and identify the most engaging segments 
          that would make great viral shorts. You can then select which segments to convert 
          into short-form videos.
        </p>
      </div>
    </div>
  </div>

  <form method="POST" class="space-y-6">
    <div class="space-y-2">
      <label for="video_url" class="block text-sm font-medium text-gray-700">
        YouTube Video URL:
      </label>
      <input
        type="url"
        id="video_url"
        name="video_url"
        required
        placeholder="https://www.youtube.com/watch?v=..."
        class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
      />
    </div>

    <div class="space-y-2">
      <label for="num_parts" class="block text-sm font-medium text-gray-700">
        Number of Shorts to Generate:
      </label>
      <input
        type="number"
        id="num_parts"
        name="num_parts"
        value="5"
        min="1"
        max="20"
        class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
      />
      <p class="text-xs text-gray-500">
        How many potential viral segments to identify (1-20)
      </p>
    </div>

    <div class="flex items-center justify-between pt-4">
      <button
        type="submit"
        id="submit-btn"
        class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"
      >
        <i class="fas fa-search mr-2"></i>Analyze Video
      </button>
      <div id="loading-indicator" class="hidden items-center">
        <i class="fas fa-spinner fa-spin text-blue-500 mr-2"></i>
        <span class="text-gray-600">Analyzing video...</span>
      </div>
    </div>
  </form>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.querySelector("form");
    const submitBtn = document.getElementById("submit-btn");
    const loadingIndicator = document.getElementById("loading-indicator");

    form.addEventListener("submit", function () {
      submitBtn.disabled = true;
      submitBtn.classList.add("opacity-50");
      loadingIndicator.classList.remove("hidden");
      loadingIndicator.classList.add("flex");
    });
  });
</script>
{% endblock %}